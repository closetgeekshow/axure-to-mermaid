javascript:%22use%20strict%22;void%20function(){(()=%3E{async%20function%20a(){for(const%20a%20of%20n)await%20b(a)}function%20b(a){return%20new%20Promise((b,c)=%3E{const%20d=document.createElement(%22script%22);d.type=%22text/javascript%22,d.src=a,d.onload=b,d.onerror=c,document.head.appendChild(d)})}function%20c(a){let%20b=1%3Carguments.length%26%26arguments[1]!==void%200%3Farguments[1]:%22%22,c=2%3Carguments.length%26%26arguments[2]!==void%200%3Farguments[2]:{};const%20d=document.createElement(a);d.textContent=b;for(const[b,e]of%20Object.entries(c))%22style%22===b%26%26%22object%22==typeof%20e%3FObject.entries(e).forEach(a=%3E{let[b,c]=a;d.style[b]=c}):%22dataset%22===b%26%26%22object%22==typeof%20e%3FObject.entries(e).forEach(a=%3E{let[b,c]=a;d.dataset[b]=c}):d[b]=e;return%20d}function%20d(a){navigator.clipboard.writeText(a).then(()=%3E{console.log(%22Raw%20text%20copied:%22,a)})}function%20e(a){const%20b={code:a,mermaid:JSON.stringify({theme:%22default%22},null,2),updateEditor:!0,autoSync:!0,updateDiagram:!0},c=JSON.stringify(b),d=new%20TextEncoder().encode(c),e=pako.deflate(d,{level:9});return%20Base64.fromUint8Array(e,!0)}async%20function%20f(a){let%20b=!!(1%3Carguments.length%26%26arguments[1]!==void%200)%26%26arguments[1];const%20c=e(a),d=`https://mermaid.ink/svg/pako:${c}`;if(b){const%20a=await%20fetch(d),b=await%20a.text();h(b,%22sitemap.svg%22,%22image/svg+xml%22)}else%20window.open(d,%22_blank%22)}async%20function%20g(a){let%20b=!!(1%3Carguments.length%26%26arguments[1]!==void%200)%26%26arguments[1];const%20c=e(a),d=`https://mermaid.ink/img/pako:${c}%3Ftype=png`;if(b){const%20a=await%20fetch(d),b=await%20a.blob();h(b,%22sitemap.png%22,%22image/png%22)}else%20window.open(d,%22_blank%22)}function%20h(b,c,d){const%20e=new%20Blob([b],{type:d}),f=URL.createObjectURL(e),g=document.createElement(%22a%22);g.href=f,g.download=c,document.body.appendChild(g),g.click(),document.body.removeChild(g),URL.revokeObjectURL(f)}function%20i(a){h(a,%22sitemap.txt%22,%22text/plain%22)}async%20function%20j(){await%20a(),window.AxureToMermaid=new%20s}async%20function%20k(){for(;t%3Cp.maxTries;){if(%22undefined%22!=typeof%20top.$axure%26%26top.$axure.document)return%20void%20j().catch(console.error);console.warn(%22axure.document%20not%20ready.%22,%22try:%20%22,++t),await%20new%20Promise(a=%3EsetTimeout(a,p.interval))}console.error(%22axure%20init%20failed%22)}var%20l={all:{text:%22Full%22,type:%22generate%22},startHere:{text:%22From%20Here%22,type:%22generate%22},copy:{text:%22Copy%22,type:%22copy%22},txtDownload:{text:%22TXT%22,type:%22download%22},svgUrl:{text:%22SVG%22,type:%22url%22},svgDownload:{text:%22SVG%22,type:%22download%22},pngUrl:{text:%22PNG%22,type:%22url%22},pngDownload:{text:%22PNG%22,type:%22download%22}},m=[[%22Sitemap%22,[%22all%22,%22startHere%22]],[%22Code%22,[%22copy%22]],[%22Download%22,[%22txtDownload%22,%22svgDownload%22,%22pngDownload%22]],[%22URL%22,[%22svgUrl%22,%22pngUrl%22]]],n=[%22https://cdn.jsdelivr.net/npm/pako%402.1.0/dist/pako.min.js%22,%22https://cdn.jsdelivr.net/npm/js-base64%403.7.5/base64.min.js%22],o=[%22https://matcha.mizu.sh/matcha.css%22],p={maxTries:10,interval:1e3},q=class{constructor(a,b){this.processor=a,this.sitemapArray=b,this.currentMermaidText=%22%22,this.container=c(%22div%22,%22%22,{id:%22toolbar%22}),this.shadow=this.container.attachShadow({mode:%22open%22});for(const%20c%20of%20o)this.loadCSSInShadow(c);this.toolbar=c(%22div%22,%22%22,{className:%22bd-default%20bg-muted%22,style:{position:%22fixed%22,display:%22flex%22,flexDirection:%22row%22,bottom:%222vh%22,right:%222vw%22,padding:%2210px%22,zIndex:%221000%22,gap:%223ch%22}}),this.buttons=this.createButtons(),this.attachButtons(),this.shadow.appendChild(this.toolbar),document.body.appendChild(this.container)}loadCSSInShadow(a){const%20b=document.createElement(%22style%22);b.textContent=`%40import%20%22${a}%22;`,this.shadow.appendChild(b)}createButtons(){return%20Object.entries(l).reduce((a,b)=%3E{let[d,e]=b;return%20a[d]=c(%22button%22,`${e.text}`,{disabled:%22generate%22!==e.type,dataset:{buttonType:e.type},onclick:()=%3Ethis.handleButtonClick(d,e.type)}),a[d].classList.add(%22fg-muted%22),a},{})}handleButtonClick(a,b){const%20c={generate:{all:()=%3Ethis.handleAllClick(),startHere:()=%3Ethis.handleStartHereClick()},copy:{copy:()=%3E{console.log(this.currentMermaidText),d(this.currentMermaidText)}},download:{txtDownload:()=%3Ei(this.currentMermaidText),svgDownload:()=%3Ef(this.currentMermaidText,!0),pngDownload:()=%3Eg(this.currentMermaidText,!0)},url:{svgUrl:()=%3Ef(this.currentMermaidText),pngUrl:()=%3Eg(this.currentMermaidText)}};c[b]%3F.[a]%3F.()}handleAllClick(){const%20a=this.processor.processSitemap(this.sitemapArray);this.currentMermaidText=this.processor.generateMermaidMarkup(a),d(this.currentMermaidText),this.enableExportButtons()}handleStartHereClick(){let%20a=top.$axure.page.shortId;if(!a){const%20b=new%20URLSearchParams(window.parent.location.search);a=b.get(%22id%22)}if(!a){const%20b=new%20URLSearchParams(window.parent.location.search).get(%22p%22);if(b){const%20c=a=%3E{for(const%20d%20of%20a){if(d.url%26%26d.url.replace(%22.html%22,%22%22)===b)return%20d.id;if(d.children){const%20a=c(d.children);if(a)return%20a}}return%20null};a=c($axure.document.sitemap.rootNodes)}}if(a){const%20b=this.processor.findCurrentNode(this.sitemapArray,a);if(b){const%20a=this.processor.processSitemap([b]);this.currentMermaidText=this.processor.generateMermaidMarkup(a),d(this.currentMermaidText),this.enableExportButtons()}}}enableExportButtons(){Object.values(this.buttons).forEach(a=%3E{%22generate%22!==a.dataset.buttonType%26%26(a.disabled=!1)})}unload(){this.toolbar%3F.parentNode%3F.removeChild(this.toolbar)}attachButtons(){m.forEach(a=%3E{let[b,d]=a;const%20e=c(%22div%22,%22%22,{style:{display:%22flex%22,flexDirection:%22column%22,alignItems:%22center%22,fontSize:%22.875rem%22,gap:%22.25rem%22}}),f=c(%22span%22,b);e.appendChild(f);const%20g=c(%22div%22,%22%22,{style:{display:%22flex%22,gap:%22.125rem%22}});d.forEach(a=%3E{g.appendChild(this.buttons[a])}),e.appendChild(g),this.toolbar.appendChild(e)});const%20a=c(%22button%22,%22X%22,{className:%22fg-muted%22,style:{height:%222rem%22,width:%222rem%22,display:%22flex%22,alignItems:%22center%22,justifyContent:%22center%22,margin:%22auto%200%22,padding:%220%22},onclick:()=%3Ethis.unload()});this.toolbar.appendChild(a)}},r=class{constructor(){}processSitemap(a){let%20b=1%3Carguments.length%26%26void%200!==arguments[1]%3Farguments[1]:1,c=2%3Carguments.length%26%26void%200!==arguments[2]%3Farguments[2]:null,d=3%3Carguments.length%26%26void%200!==arguments[3]%3Farguments[3]:[];return%20a.forEach(a=%3E{const%20e=a.id||`folder_${Math.random().toString(36).substr(2,7)}`;d.push({id:e,name:a.pageName,level:b,parentId:c,type:a.type}),a.children%26%26this.processSitemap(a.children,b+1,e,d)}),d}generateMermaidMarkup(a){const%20b=[%22graph%20TD%22,`classDef%20containers%20fill:transparent,stroke-width:0`,``],c=Math.max(...a.map(a=%3Ea.level));for(let%20d=1;d%3C=c;d++){const%20c=a.filter(a=%3Ea.level===d);b.push(``),b.push(`%20%20subgraph%20tier${d}[%22%20%22]`),c.forEach(a=%3E{1==d%3Fb.push(`%20%20%20%20${a.id}[%22${a.name}%22]`):b.push(`%20%20%20%20${a.parentId}%20---%20${a.id}[%22${a.name}%22]`)}),b.push(`%20%20end`,``)}b.push(``),b.push(`%20%20class%20${Array.from({length:c},(a,b)=%3E`tier${b+1}`).join(%22,%22)}%20containers`);const%20d=b.join(%22\n%22);return%20d}findCurrentNode(a,b){for(const%20c%20of%20a){if(c.id===b)return%20c;if(c.children){const%20a=this.findCurrentNode(c.children,b);if(a)return%20a}}return%20null}},s=class{constructor(){this.init()}async%20init(){this.toolbar=new%20q(new%20r(),top.$axure.document.sitemap.rootNodes)}},t=0;k()})()}();